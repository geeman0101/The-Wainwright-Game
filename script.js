console.log("script.js is loading..."); // Game data const fells = [ { name: "Catbells", height: 1480, difficulty: "Easy", energyCost: 1, points: 1, fact: "Overlooks Derwentwater!" }, { name: "Helvellyn", height: 3117, difficulty: "Hard", energyCost: 4, points: 5, fact: "Home to Striding Edge!" }, { name: "Haystacks", height: 1959, difficulty: "Moderate", energyCost: 3, points: 3, fact: "Wainwright’s ashes are here!" }, { name: "Scafell Pike", height: 3209, difficulty: "Hard", energyCost: 5, points: 5, fact: "England’s highest peak!" }, { name: "Skiddaw", height: 3054, difficulty: "Moderate", energyCost: 3, points: 3, fact: "Fourth highest in the Lakes!" } ]; const weatherOptions = { "Sunny": { effect: "Easy hiking! (+1 SP)", bonus: 1, energyMod: 0 }, "Rain": { effect: "Slippery paths! (+1 energy cost)", bonus: 0, energyMod: 1 }, "Fog": { effect: "Can’t see! Skip turn.", bonus: 0, energyMod: 0 } }; const trivia = { "What lake does Catbells overlook?": "Derwentwater", "Which fell is England’s highest?": "Scafell Pike", "Where are Wainwright’s ashes scattered?": "Haystacks" }; // Player state let player = { name: "Hiker", energy: 10, gear: 3, summitPoints: 0, baggedFells: [] }; let currentFell = null; let currentWeather = null; // DOM elements const startScreen = document.getElementById("start-screen"); const gameplay = document.getElementById("gameplay"); const messageDiv = document.getElementById("message"); const triviaDiv = document.getElementById("trivia"); const triviaQuestion = document.getElementById("trivia-question"); const triviaAnswer = document.getElementById("trivia-answer"); // Game functions function startGame() { console.log("startGame called!"); const nameInput = document.getElementById("player-name-input"); if (nameInput) { player.name = nameInput.value.trim() || "Hiker"; } else { console.error("Name input not found!"); return; } if (startScreen && gameplay) { startScreen.style.display = "none"; gameplay.style.display = "block"; } else { console.error("Screen elements missing!"); return; } pickNewFell(); updateUI(); } function pickNewFell() { currentFell = fells[Math.floor(Math.random() * fells.length)]; currentWeather = Object.keys(weatherOptions)[Math.floor(Math.random() * 3)]; updateUI(); } function updateUI() { document.getElementById("player-name").textContent = player.name; document.getElementById("energy").textContent = player.energy; document.getElementById("gear").textContent = player.gear; document.getElementById("summit-points").textContent = player.summitPoints; document.getElementById("bagged-fells").textContent = player.baggedFells.length ? player.baggedFells.join(", ") : "None"; document.getElementById("fell-name").textContent = currentFell ? currentFell.name : "?"; document.getElementById("fell-height").textContent = currentFell ? currentFell.height : "?"; document.getElementById("fell-difficulty").textContent = currentFell ? currentFell.difficulty : "?"; document.getElementById("fell-fact").textContent = currentFell ? currentFell.fact : ""; document.getElementById("weather").textContent = currentWeather || "?"; messageDiv.textContent = ""; triviaDiv.style.display = "none"; } function hikeFell() { console.log("hikeFell called!"); if (player.energy <= 0 || player.gear <= 0) { endGame(); return; } const weatherData = weatherOptions[currentWeather]; const totalEnergyCost = currentFell.energyCost + weatherData.energyMod; if (player.energy < totalEnergyCost) { messageDiv.textContent = "Not enough energy! Rest or try an easier fell."; return; } player.energy -= totalEnergyCost; if (currentWeather === "Fog") { messageDiv.textContent = "Lost in fog! Turn skipped."; pickNewFell(); updateUI(); return; } if (Math.random() < 0.3) { if (player.gear > 0 && confirm("Sheep block the path! Lose 1 gear to pass? (Cancel to lose energy)")) { player.gear -= 1; } else { player.energy -= 1; } } player.summitPoints += currentFell.points + weatherData.bonus; player.baggedFells.push(currentFell.name); messageDiv.textContent = `Summited ${currentFell.name}! +${currentFell.points + weatherData.bonus} SP`; if (Math.random() < 0.5) { showTrivia(); } else { pickNewFell(); updateUI(); } } function rest() { console.log("rest called!"); player.energy += 2; messageDiv.textContent = "Rested at the pub! +2 Energy"; pickNewFell(); updateUI(); } function showTrivia() { const [question, answer] = Object.entries(trivia)[Math.floor(Math.random() * trivia.length)]; triviaQuestion.textContent = question; triviaAnswer.value = ""; triviaAnswer.dataset.answer = answer; triviaDiv.style.display = "block"; } function submitTrivia() { console.log("submitTrivia called!"); const answer = triviaAnswer.value.trim().toLowerCase(); const correctAnswer = triviaAnswer.dataset.answer.toLowerCase(); if (answer === correctAnswer) { player.summitPoints += 1; messageDiv.textContent = "Correct! +1 SP"; } else { messageDiv.textContent = `Wrong! It was ${triviaAnswer.dataset.answer}.`; } triviaDiv.style.display = "none"; pickNewFell(); updateUI(); } function endGame() { messageDiv.textContent = `Game Over! Final Score: ${player.summitPoints}. Bagged: ${player.baggedFells.length} fells.`; document.getElementById("hike-btn").style.display = "none"; document.getElementById("rest-btn").style.display = "none"; } // Attach event listeners document.addEventListener("DOMContentLoaded", function() { console.log("DOM fully loaded!"); const startBtn = document.getElementById("start-btn"); const hikeBtn = document.getElementById("hike-btn"); const restBtn = document.getElementById("rest-btn"); const triviaBtn = document.getElementById("trivia-btn"); if (startBtn) { startBtn.addEventListener("click", startGame); console.log("Start button listener attached!"); } else { console.error("Start button not found!"); } if (hikeBtn) hikeBtn.addEventListener("click", hikeFell); if (restBtn) restBtn.addEventListener("click", rest); if (triviaBtn) triviaBtn.addEventListener("click", submitTrivia); }); // Backup listener in case DOMContentLoaded fails window.onload = function() { const startBtn = document.getElementById("start-btn"); if (startBtn && !startBtn.onclick) { startBtn.onclick = startGame; console.log("Backup start button listener attached!"); } };
